<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word search</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
</head>
<body>
    <input type="text" placeholder="string" id="string">
    <input type="text" placeholder="word in string" id="word">
	<button id="replace">Replace</button>
    <p id='output'></p>
	<div id="dialog" style="display: none;" title="Word to replace with">
	<input placeholder="Replacement" id="replacement">
	<br>
	<button id="confirm">Replace</button>
	</div>
    <script>
	
	function arrToStr(arr){
		let str = '';
		for(let i = 0; i < arr.length; i++){
			str+=arr[i]
		}
		return str;
	}

	function htmlRemove(str) {
    if (str == '') {
		return false;
	}
    else {
    str = str.toString();
    return str.replace( /(<([^>]+)>)/ig, '');
 	}
}

    $("#string").on("input", function(){
            $("#output").html(htmlRemove($("#string").val()));
        })

        $("#word").on("input", function(){
			let word = $("#word").val()
			let string = $("#string").val();
			let output = $("#output");
			if(string.indexOf(word) == -1){
				output.html(string)
			} else {
			let nextWords = '';
			let strSplit = string.split(word)
			let newWord, strWord;
			if(arrToStr(strSplit) != string){
				for(let i = 0; i < strSplit.length; i++){
					strWord = "<span>" + strSplit[i] + "</span>";
					newWord = "<mark>" + word + "</mark>";
					let completeHTML = strWord + newWord;
					nextWords += completeHTML;
				}
				nextWords = nextWords.slice(0, -newWord.length);
			}
			output.html(nextWords);
		}
     	})
	 $("#replace").click(function(){
	 	$('#replacement').val("");
		 let string = $("#string").val();
		 let word = $("#word").val();
		 let output = $("#output");
		 if(word.trim() == "" && string.trim() == ""){
			output.html("Both inputs cannot be blank!")
		 }
		 else if(word.trim() == ""){
			 output.html("Word cannot be blank!");
		 } else if(string.trim() == ""){
			output.html("String cannot be blank!");
		 } else {
			$("#dialog").dialog({
				draggable: false,
				resizable: false,
				modal: true
			});
			$("#confirm").click(function(){
				let replacement = $("#replacement").val();
				$('mark').text(replacement)
				$("#string").val(output.text());
				$("#word").val(replacement)
				$("#dialog").dialog("close")
		})
	}
})
    </script>
</body>
</html>