<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word search</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <input type="text" placeholder="string" id="string">
    <input type="text" placeholder="word in string" id="word">
    <p id='output'></p>
    <script>
	function arrToStr(arr){
		let str = '';
		for(let i = 0; i < arr.length; i++){
			str+=arr[i]
		}
		return str;
	}
	
	function strToArr(str){
	let arr = [];
	for(let i = 0; i < str.length; i++){
	arr.push(str[i]);
	}
	return arr;
	}
	
	function htmlRemove(str) {
    if (str == '') {
		return false;
	}
    else {
    str = str.toString();
    return str.replace( /(<([^>]+)>)/ig, '');
 }
}

        $("#string").on("input", function(){
            $("#output").html(htmlRemove($("#string").val()));
        })
        $("#word").on("input", function(){
            let word = $("#word").val();
			let string = $("#string").val();
			let strArr = strToArr(string);
			let output = $("#output");
			let charArray = [];
			let index = 0;
			for(let i = 0; i < strArr.length; i++){
				if(string[i] == word[index])	{
					if(word.length > 1){
					if(word[index + 1] == string[i + 1]){
					strArr[i] = "<mark>" + word[index] + "</mark>";
					let newI = i;
					newI++;
					strArr[newI] = "<mark>" + word[index + 1] + "</mark>";
					i++;
					} else {
					strArr[i] = "<span>" + string[i] + "</span>";
					}
					} else {
					strArr[i] = "<mark>" + word[index] + "</mark>";
					}
					index++
				}else if(string[i] == word[0]){
					strArr[i] = "<mark>" + word[0] + "</mark>";
					index = 0;
				}
				else {
					strArr[i] = "<span>" + string[i] + "</span>";
					index = 0;
				}
			}
			let str = arrToStr(strArr);
			output.html(str);
     })
    </script>
</body>
</html>